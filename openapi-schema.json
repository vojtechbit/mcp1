{
  "openapi": "3.1.0",
  "info": {
    "title": "Gmail & Calendar OAuth API",
    "description": "API for managing Gmail and Google Calendar through authenticated OAuth proxy",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://mcp1-oauth-server.onrender.com"
    }
  ],
  "paths": {
    "/api/gmail/send": {
      "post": {
        "operationId": "sendEmail",
        "summary": "Send an email",
        "description": "Send an email from the authenticated user's Gmail account",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["to", "subject", "body"],
                "properties": {
                  "to": {
                    "type": "string",
                    "description": "Recipient email address"
                  },
                  "subject": {
                    "type": "string",
                    "description": "Email subject"
                  },
                  "body": {
                    "type": "string",
                    "description": "Email body content"
                  },
                  "cc": {
                    "type": "string",
                    "description": "CC recipients (optional)"
                  },
                  "bcc": {
                    "type": "string",
                    "description": "BCC recipients (optional)"
                  },
                  "includeMcp1Attribution": {
                    "type": "boolean",
                    "description": "Include MCP1 attribution footer (default: false)",
                    "default": false
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Email sent successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "messageId": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/gmail/messages": {
      "get": {
        "operationId": "searchEmails",
        "summary": "Search emails",
        "description": "Search through the user's emails with optional query",
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "description": "Gmail search query (e.g., 'from:example@gmail.com', 'subject:meeting')",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "maxResults",
            "in": "query",
            "description": "Maximum number of results (default: 10)",
            "schema": {
              "type": "integer",
              "default": 10
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Emails retrieved successfully"
          }
        }
      }
    },
    "/api/calendar/events": {
      "get": {
        "operationId": "listCalendarEvents",
        "summary": "List calendar events",
        "description": "List upcoming events from the user's Google Calendar",
        "parameters": [
          {
            "name": "timeMin",
            "in": "query",
            "description": "Start time (ISO 8601 format)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "timeMax",
            "in": "query",
            "description": "End time (ISO 8601 format)",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "maxResults",
            "in": "query",
            "description": "Maximum number of results (default: 10)",
            "schema": {
              "type": "integer",
              "default": 10
            }
          },
          {
            "name": "query",
            "in": "query",
            "description": "Search query for event titles",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Events retrieved successfully"
          }
        }
      },
      "post": {
        "operationId": "createCalendarEvent",
        "summary": "Create a calendar event",
        "description": "Create a new event in the user's Google Calendar",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["summary", "start", "end"],
                "properties": {
                  "summary": {
                    "type": "string",
                    "description": "Event title"
                  },
                  "description": {
                    "type": "string",
                    "description": "Event description"
                  },
                  "location": {
                    "type": "string",
                    "description": "Event location"
                  },
                  "start": {
                    "type": "string",
                    "description": "Start time (ISO 8601 format)"
                  },
                  "end": {
                    "type": "string",
                    "description": "End time (ISO 8601 format)"
                  },
                  "timeZone": {
                    "type": "string",
                    "description": "Timezone (default: UTC)",
                    "default": "UTC"
                  },
                  "attendees": {
                    "type": "array",
                    "description": "List of attendee emails",
                    "items": {
                      "type": "string"
                    }
                  },
                  "includeMcp1Attribution": {
                    "type": "boolean",
                    "description": "Include MCP1 attribution in description (default: true)",
                    "default": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Event created successfully"
          }
        }
      }
    },
    "/api/calendar/events/{eventId}": {
      "get": {
        "operationId": "getCalendarEvent",
        "summary": "Get a calendar event",
        "description": "Get details of a specific calendar event",
        "parameters": [
          {
            "name": "eventId",
            "in": "path",
            "required": true,
            "description": "Event ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Event retrieved successfully"
          }
        }
      },
      "patch": {
        "operationId": "updateCalendarEvent",
        "summary": "Update a calendar event",
        "description": "Update an existing calendar event",
        "parameters": [
          {
            "name": "eventId",
            "in": "path",
            "required": true,
            "description": "Event ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "summary": {
                    "type": "string",
                    "description": "Event title"
                  },
                  "description": {
                    "type": "string",
                    "description": "Event description"
                  },
                  "location": {
                    "type": "string",
                    "description": "Event location"
                  },
                  "start": {
                    "type": "string",
                    "description": "Start time (ISO 8601 format)"
                  },
                  "end": {
                    "type": "string",
                    "description": "End time (ISO 8601 format)"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Event updated successfully"
          }
        }
      },
      "delete": {
        "operationId": "deleteCalendarEvent",
        "summary": "Delete a calendar event",
        "description": "Delete a calendar event",
        "parameters": [
          {
            "name": "eventId",
            "in": "path",
            "required": true,
            "description": "Event ID",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Event deleted successfully"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "OAuth2": {
        "type": "oauth2",
        "flows": {
          "authorizationCode": {
            "authorizationUrl": "https://accounts.google.com/o/oauth2/v2/auth",
            "tokenUrl": "https://oauth2.googleapis.com/token",
            "scopes": {
              "https://www.googleapis.com/auth/gmail.send": "Send emails",
              "https://www.googleapis.com/auth/gmail.readonly": "Read emails",
              "https://www.googleapis.com/auth/gmail.modify": "Modify emails",
              "https://www.googleapis.com/auth/calendar": "Manage calendar",
              "https://www.googleapis.com/auth/userinfo.email": "View email address",
              "https://www.googleapis.com/auth/userinfo.profile": "View profile"
            }
          }
        }
      }
    }
  },
  "security": [
    {
      "OAuth2": []
    }
  ]
}
